"use strict";angular.module("myApp",["ngRoute","myApp.input","ui.bootstrap"]).config(["$routeProvider",function(e){e.when("/grad-cost",{templateUrl:"input/input.html",controller:"InputController"});e.otherwise({redirectTo:"/grad-cost"})}]);"use strict";var inputModule=angular.module("myApp.input",["ngRoute"]);inputModule.controller("InputController",["$scope","$filter","schoolsInfo",function(e,t,a){e.hideCosts=true;e.hidePayments=true;e.hideLoans=true;e.hideDebt=true;e.hideDisclaimer=true;e.hideAbout=true;e.hideContact=true;var r="ett.dev";var n="eloper@g";var i="mail.com";e.em=r+n+i;e.schools=a.allSchools();var s={};e.costs=angular.copy(s);e.payments={scholarships:0,assistanceships:0,jobs:0,savings:0};e.data={years:2};e.updateSchool=function(){e.costNotes=null;if(e.school){e.programs=a.allPrograms(e.school);if(a.schoolCosts(e.school)){e.costs=angular.copy(a.schoolCosts(e.school));e.update()}}else{e.programs=[];e.costs=angular.copy(s);e.update();e.hideCosts=false}};e.updateProgram=function(){e.costNotes=null;if(e.school&&e.program){var t=a.programInfo(e.school,e.program);if(t.costs){angular.extend(e.costs,t.costs)}if(t.years){e.data.years=t.years}if(t.notes){e.costNotes=t.notes}}else{e.hideCosts=false;if(a.schoolCosts(e.school)){e.costs=angular.copy(a.schoolCosts(e.school))}else{e.costs=angular.copy(s)}}e.update()};e.repayment={standard:{},extended:{},graduated10:{},graduated25:{}};e.stafford={origination:.01068,interest:.0584,yearlyMax:20500};e.plus={origination:.04272,interest:.0684};var o=function(e){var t=0;for(var a in e){if(e.hasOwnProperty(a)&&!isNaN(parseFloat(e[a]))){t+=parseFloat(e[a])}}return t};var l=function(e,t,a){return Math.pow(1+t,a)*e};var u=function(e,t,a,r){return l(e*(1+t),a,r)};var c=function(e,t){return u(e.yearlyAmount,e.origination,e.interest,t)};var d=function(e,t){if(t==1){return c(e,1)}else{return c(e,t)+d(e,t-1)}};var p=function(){return{principal:[e.stafford.gradDebt,e.plus.gradDebt],interestRate:[e.stafford.interest*100,e.plus.interest*100],monthsInRepayment:0}};var y=function(e,t,a){return REPAYMENT[e](t,a)};e.update=function(){e.totalCosts=o(e.costs);e.totalPayments=o(e.payments);e.totalLoans=e.totalCosts-e.totalPayments;if(e.totalLoans<e.stafford.yearlyMax){e.stafford.yearlyAmount=e.totalLoans;e.plus.yearlyAmount=0}else{e.stafford.yearlyAmount=e.stafford.yearlyMax;e.plus.yearlyAmount=e.totalLoans-e.stafford.yearlyMax}e.stafford.gradDebt=d(e.stafford,e.data.years);e.plus.gradDebt=d(e.plus,e.data.years);e.data.gradDebt=e.stafford.gradDebt+e.plus.gradDebt;e.repayment.standard.monthly=y("standardRepayment",p(),"standard");e.repayment.standard.total=e.repayment.standard.monthly*120;e.repayment.standard.interest=e.repayment.standard.total-e.data.gradDebt;e.repayment.extended.monthly=parseFloat(y("standardRepayment",p(),"extended"))||0;e.repayment.extended.total=e.repayment.extended.monthly*300;e.repayment.extended.interest=e.repayment.extended.total-e.data.gradDebt;e.repayment.graduated10.firstMonthly=y("graduatedRepayment",p(),"standard");e.repayment.graduated10.lastMonthly=3*e.repayment.graduated10.firstMonthly;e.repayment.graduated10.averageMonthly=(e.repayment.graduated10.firstMonthly+e.repayment.graduated10.lastMonthly)/2;e.repayment.graduated10.total=e.repayment.graduated10.averageMonthly*120;e.repayment.graduated10.interest=e.repayment.graduated10.total-e.data.gradDebt;e.repayment.graduated25.firstMonthly=parseFloat(y("graduatedRepayment",p(),"extended"))||0;e.repayment.graduated25.lastMonthly=3*e.repayment.graduated25.firstMonthly;e.repayment.graduated25.averageMonthly=(e.repayment.graduated25.firstMonthly+e.repayment.graduated25.lastMonthly)/2;e.repayment.graduated25.total=e.repayment.graduated25.averageMonthly*300;e.repayment.graduated25.interest=e.repayment.graduated25.total-e.data.gradDebt};e.update()}]);inputModule.factory("schoolsInfo",function(){var e={Harvard:{costs:{housing:11770,insurance:1042+2390,personal:14318},programs:{MBA:{notes:"Costs are for 9 month academic year. Fees include books. Personal costs include food.",years:2,costs:{fees:7655,tuition:61225}}}},"UC Berkeley":{costs:{housing:12618,food:7138,insurance:3754,books:796,personal:1548,transportation:3020},programs:{"MS, Non-professional":{years:2,costs:{tuition:13432+15102,fees:0}},"MS, Non-professional (in state)":{years:2,costs:{tuition:13432,fees:0}}}},"University of Pennsylvania":{costs:{housing:14400,food:6e3,personal:3600,transportation:240,insurance:3300},programs:{MD:{notes:"Based on second year costs. Does not include USMLE expenses.",years:4,costs:{tuition:52210,fees:2686+1326+514+48,books:550,transportation:240+200}}}},Widener:{costs:{fees:248+50,housing:8190,food:1328*2,books:1200,personal:1188,transportation:2700},programs:{"PSY D":{years:5,costs:{tuition:29468}}}}};var t={allSchools:function(){return Object.keys(e)},schoolCosts:function(t){return e[t]["costs"]},allPrograms:function(t){return Object.keys(e[t]["programs"])},programInfo:function(t,a){return e[t]["programs"][a]}};return t});inputModule.filter("toCurrency",function(e){return function(t){return e("currency")(t,"$",0)}});inputModule.filter("toPercent",function(e){return function(t){return e("number")(t*100,2)+"%"}});inputModule.directive("format",["$filter",function(e){return{require:"?ngModel",link:function(t,a,r,n){if(!n)return;n.$formatters.unshift(function(t){return e(r.format)(n.$modelValue)});n.$parsers.unshift(function(t){var r=a[0].selectionStart;var n=a[0].value.length;var i=t.replace(/[^\d|\-+|\.+]/g,"");a.val(e("number")(i));if(r!=n){a[0].setSelectionRange(r,r)}return i})}}}]);var REPAYMENT=function(){var e=function(e,t){switch(t){case"AK":return 14720+5200*(e-1);break;case"HI":return 13550+4780*(e-1);break;default:return 11770+4160*(e-1)}};return{standardRepayment:function(e,t){var a=0,r=0;for(var n=0;n<e.principal.length;n++){iTerm=(t.toLowerCase()==="extended"?300:120)-e.monthsInRepayment;if(iTerm<1){iTerm=1}a+=iPrincipal=e.principal[n];iInterestRate=e.interestRate[n]/100;iOutstandingInterest=iPrincipal*(iInterestRate/12);var i=iPrincipal/(1/(1+iOutstandingInterest/iPrincipal)*(1-1/Math.pow(1+iInterestRate/12,iTerm))/(1-1/(1+iInterestRate/12)));if(isNaN(i)){r+=0}else{r+=i}}if(t.toLowerCase()==="extended"&&a<3e4){return"Not Qualified"}if(r<50){r=50}if(a==0){r=0}return r},oldGraduatedRepayment:function(e,t){var a=24,r=0,n=0;if(t.toLowerCase()==="extended"){var i=.05,s=12}else{var i=.2,s=5}for(var o=0;o<e.principal.length;o++){n+=iPrincipal=e.principal[o];iInterestRate=e.interestRate[o]/100;iOutstandingInterest=iPrincipal*(iInterestRate/12);iBasicRatio=1/(1+iInterestRate/12);iGeometricProgressionTotal=0;iFirstTermGeo=1/(1+iOutstandingInterest/iPrincipal);for(var l=0;l<s;l++){iGeometricProgressionTotal+=iFirstTermGeo*(1-Math.pow(iBasicRatio,a))/(1-iBasicRatio);iFirstTermGeo=iFirstTermGeo*Math.pow(iBasicRatio,a)*(1+i)}var u=iPrincipal/iGeometricProgressionTotal;if(isNaN(u)){r+=0}else{r+=u}}if(t.toLowerCase()==="extended"&&n<3e4){return"Not Qualified"}return r},graduatedRepayment:function(e,t){if(t=="extended"){var a=0;for(var r=0;r<e.principal.length;r++){a+=e.principal[r]}if(a<3e4){return"Not Qualified"}}var n=0,i=t=="extended"?12:5;for(var s=0;s<e.principal.length;s++){var o=new Array;o.principal=e.principal[s],o.interestRate=e.interestRate[s];var l=e.principal[s],u=0,c=e.interestRate[s]/100,d=c/12,p=0,y=1.2437673130193905,m=Math.max(5,REPAYMENT.standardRepayment(o,"standard")/2,l*d);firstPayment=m,secondPayment=firstPayment*y,thirdPayment=secondPayment*y,fourthPayment=thirdPayment*y,fifthPayment=fourthPayment*y,incrementFactor=0,prevIncrementFactor=0,threeTimesPayment=m*3,amountChange=fifthPayment,lastGradPaymentAmount=fifthPayment,populateLevels=function(){var e=new Array(firstPayment,secondPayment,thirdPayment,fourthPayment,fifthPayment);return e},r=1;while(r<99){var f=populateLevels();u=l;for(var h=0;h<i;h++){var P=1;while(P<=24){p=d*u;u=u+p-f[h];P+=1}}if(parseInt(u)<=5&&parseInt(u)>=-5){break}if(parseInt(u)>5){incrementFactor=1}else{if(parseInt(u)<-5){incrementFactor=-1}}if(incrementFactor>0&&prevIncrementFactor>0||incrementFactor<0&&prevIncrementFactor<0){}else{amountChange=amountChange/2}prevIncrementFactor=incrementFactor;lastGradPaymentAmount=lastGradPaymentAmount+amountChange*incrementFactor;var g=1/4;var I=lastGradPaymentAmount/firstPayment;y=Math.pow(I,g);firstPayment=m*y;secondPayment=firstPayment*y;thirdPayment=secondPayment*y;fourthPayment=thirdPayment*y;fifthPayment=fourthPayment*y;threeTimesPayment=firstPayment*3;if(threeTimesPayment>fifthPayment){m-=1}else{m+=1}r=r+1}n+=firstPayment}return n},payAsYouEarnRepayment:function(t){var a=0,r=e(t.familySize?t.familySize:1,t.state?t.state:"PA");a=(t.AGI-1.5*r)*.1/12;if(a>REPAYMENT.standardRepayment(t,"standard")){return"Not Qualified"}else{if(a<0){a=0}}return a},incomeBasedRepayment:function(t){var a=0,r=e(t.familySize?t.familySize:1,t.state?t.state:"PA");a=(t.AGI-1.5*r)*.15/12;if(a>REPAYMENT.standardRepayment(t,"standard")){return"Not Qualified"}else{if(a<0){a=0}}return a},incomeContingentRepayment:function(t){iPrincipalConstantMultiplier=0;for(var a=0;a<t.principal.length;a++){switch(true){case t.interestRate[a]<=3.5:iConstantMultiplier=.102174;break;case t.interestRate[a]<=4:iConstantMultiplier=.105063;break;case t.interestRate[a]<=4.5:iConstantMultiplier=.108001;break;case t.interestRate[a]<=5:iConstantMultiplier=.110987;break;case t.interestRate[a]<=5.5:iConstantMultiplier=.114021;break;case t.interestRate[a]<=6:iConstantMultiplier=.117102;break;case t.interestRate[a]<=6.8:iConstantMultiplier=.12213;break;case t.interestRate[a]<=7:iConstantMultiplier=.123406;break;case t.interestRate[a]<=7.9:iConstantMultiplier=.129237;break;case t.interestRate[a]<=8:iConstantMultiplier=.129894;break;default:iConstantMultiplier=.131545;break}iPrincipalConstantMultiplier+=t.principal[a]*iConstantMultiplier}if(t.familySize>1){switch(true){case t.AGI<=11150:iIPF=50.52;break;case t.AGI<=17593:iIPF=56.68;break;case t.AGI<=20965:iIPF=59.56;break;case t.AGI<=27408:iIPF=67.79;break;case t.AGI<=33954:iIPF=75.22;break;case t.AGI<=42648:iIPF=87.61;break;case t.AGI<=53487:iIPF=100;break;case t.AGI<=64331:iIPF=100;break;case t.AGI<=80596:iIPF=109.4;break;case t.AGI<=107695:iIPF=125;break;case t.AGI<=145638:iIPF=140.6;break;case t.AGI<=203682:iIPF=150;break;default:iIPF=200;break}}else{switch(true){case t.AGI<=11150:iIPF=55;break;case t.AGI<=15342:iIPF=57.79;break;case t.AGI<=19741:iIPF=60.57;break;case t.AGI<=24240:iIPF=66.23;break;case t.AGI<=28537:iIPF=71.89;break;case t.AGI<=33954:iIPF=80.33;break;case t.AGI<=42648:iIPF=88.77;break;case t.AGI<=53488:iIPF=100;break;case t.AGI<=64331:iIPF=100;break;case t.AGI<=77318:iIPF=111.8;break;case t.AGI<=99003:iIPF=123.5;break;case t.AGI<=140221:iIPF=141.2;break;case t.AGI<=160776:iIPF=150;break;default:iIPF=200;break}}iMonthlyPaymentA=iPrincipalConstantMultiplier*iIPF/100/12;iPoverty=e(t.familySize?t.familySize:1,t.state?t.state:"PA");iMonthlyPaymentB=(t.AGI-iPoverty)*.2/12;iMonthlyPayment=Math.min(iMonthlyPaymentA,iMonthlyPaymentB);if(iMonthlyPayment<0){iMonthlyPayment=0}return iMonthlyPayment},incomeSensitiveRepayment:function(e){iMonthlyPayment=0;iMonthlyInterest=0;for(var t=0;t<e.principal.length;t++){iMonthlyPayment+=e.AGI*.04/12;iMonthlyInterest+=e.principal[t]*e.interestRate[t]/100/12}return Math.max(iMonthlyPayment,iMonthlyInterest)}}}();