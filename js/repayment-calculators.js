var REPAYMENT=(function(){var a=function(b,c){switch(c){case"AK":return 14720+(5200*(b-1));break;case"HI":return 13550+(4780*(b-1));break;default:return 11770+(4160*(b-1))}};return{standardRepayment:function(f,g){var d=0,b=0;for(var c=0;c<f.principal.length;c++){iTerm=(g.toLowerCase()==="extended"?300:120)-f.monthsInRepayment;if(iTerm<1){iTerm=1}d+=iPrincipal=f.principal[c];iInterestRate=f.interestRate[c]/100;iOutstandingInterest=iPrincipal*(iInterestRate/12);var e=iPrincipal/((1/(1+iOutstandingInterest/iPrincipal))*(1-(1/Math.pow((1+iInterestRate/12),iTerm)))/(1-(1/(1+iInterestRate/12))));if(isNaN(e)){b+=0}else{b+=e}}if(g.toLowerCase()==="extended"&&d<30000){return"Not Qualified"}if(b<50){b=50}if(d==0){b=0}return b},oldGraduatedRepayment:function(d,b){var g=24,m=0,h=0;if(b.toLowerCase()==="extended"){var k=0.05,l=12}else{var k=0.2,l=5}for(var f=0;f<d.principal.length;f++){h+=iPrincipal=d.principal[f];iInterestRate=d.interestRate[f]/100;iOutstandingInterest=iPrincipal*(iInterestRate/12);iBasicRatio=1/(1+(iInterestRate/12));iGeometricProgressionTotal=0;iFirstTermGeo=1/(1+(iOutstandingInterest/iPrincipal));for(var e=0;e<l;e++){iGeometricProgressionTotal+=(iFirstTermGeo*(1-(Math.pow(iBasicRatio,g)))/(1-iBasicRatio));iFirstTermGeo=(iFirstTermGeo*(Math.pow(iBasicRatio,g)))*(1+k)}var c=iPrincipal/iGeometricProgressionTotal;if(isNaN(c)){m+=0}else{m+=c}}if(b.toLowerCase()==="extended"&&h<30000){return"Not Qualified"}return m},graduatedRepayment:function(c,g){if(g=="extended"){var e=0;for(var s=0;s<c.principal.length;s++){e+=c.principal[s]}if(e<30000){return"Not Qualified"}}var m=0,w=g=="extended"?12:5;for(var q=0;q<c.principal.length;q++){var k=new Array();k.principal=c.principal[q],k.interestRate=c.interestRate[q];var f=c.principal[q],v=0,x=c.interestRate[q]/100,n=x/12,o=0,l=1.2437673130193905,u=Math.max(5,REPAYMENT.standardRepayment(k,"standard")/2,f*n);firstPayment=u,secondPayment=firstPayment*l,thirdPayment=secondPayment*l,fourthPayment=thirdPayment*l,fifthPayment=fourthPayment*l,incrementFactor=0,prevIncrementFactor=0,threeTimesPayment=u*3,amountChange=fifthPayment,lastGradPaymentAmount=fifthPayment,populateLevels=function(){var i=new Array(firstPayment,secondPayment,thirdPayment,fourthPayment,fifthPayment);return i},s=1;while(s<99){var d=populateLevels();v=f;for(var r=0;r<w;r++){var t=1;while(t<=24){o=n*v;v=v+o-d[r];t+=1}}if(parseInt(v)<=5&&parseInt(v)>=-5){break}if(parseInt(v)>5){incrementFactor=1}else{if(parseInt(v)<-5){incrementFactor=-1}}if(((incrementFactor>0)&&(prevIncrementFactor>0))||((incrementFactor<0)&&(prevIncrementFactor<0))){}else{amountChange=amountChange/2}prevIncrementFactor=incrementFactor;lastGradPaymentAmount=lastGradPaymentAmount+(amountChange*incrementFactor);var h=1/4;var b=lastGradPaymentAmount/firstPayment;l=Math.pow(b,h);firstPayment=u*l;secondPayment=firstPayment*l;thirdPayment=secondPayment*l;fourthPayment=thirdPayment*l;fifthPayment=fourthPayment*l;threeTimesPayment=firstPayment*3;if(threeTimesPayment>fifthPayment){u-=1}else{u+=1}s=s+1}m+=firstPayment}return m},payAsYouEarnRepayment:function(d){var b=0,c=a(d.familySize?d.familySize:1,d.state?d.state:"PA");b=(d.AGI-(1.5*c))*0.1/12;if(b>REPAYMENT.standardRepayment(d,"standard")){return"Not Qualified"}else{if(b<0){b=0}}return b},incomeBasedRepayment:function(d){var b=0,c=a(d.familySize?d.familySize:1,d.state?d.state:"PA");b=(d.AGI-(1.5*c))*0.15/12;if(b>REPAYMENT.standardRepayment(d,"standard")){return"Not Qualified"}else{if(b<0){b=0}}return b},incomeContingentRepayment:function(c){iPrincipalConstantMultiplier=0;for(var b=0;b<c.principal.length;b++){switch(true){case c.interestRate[b]<=3.5:iConstantMultiplier=0.102174;break;case c.interestRate[b]<=4:iConstantMultiplier=0.105063;break;case c.interestRate[b]<=4.5:iConstantMultiplier=0.108001;break;case c.interestRate[b]<=5:iConstantMultiplier=0.110987;break;case c.interestRate[b]<=5.5:iConstantMultiplier=0.114021;break;case c.interestRate[b]<=6:iConstantMultiplier=0.117102;break;case c.interestRate[b]<=6.8:iConstantMultiplier=0.12213;break;case c.interestRate[b]<=7:iConstantMultiplier=0.123406;break;case c.interestRate[b]<=7.9:iConstantMultiplier=0.129237;break;case c.interestRate[b]<=8:iConstantMultiplier=0.129894;break;default:iConstantMultiplier=0.131545;break}iPrincipalConstantMultiplier+=c.principal[b]*iConstantMultiplier}if(c.familySize>1){switch(true){case c.AGI<=11150:iIPF=50.52;break;case c.AGI<=17593:iIPF=56.68;break;case c.AGI<=20965:iIPF=59.56;break;case c.AGI<=27408:iIPF=67.79;break;case c.AGI<=33954:iIPF=75.22;break;case c.AGI<=42648:iIPF=87.61;break;case c.AGI<=53487:iIPF=100;break;case c.AGI<=64331:iIPF=100;break;case c.AGI<=80596:iIPF=109.4;break;case c.AGI<=107695:iIPF=125;break;case c.AGI<=145638:iIPF=140.6;break;case c.AGI<=203682:iIPF=150;break;default:iIPF=200;break}}else{switch(true){case c.AGI<=11150:iIPF=55;break;case c.AGI<=15342:iIPF=57.79;break;case c.AGI<=19741:iIPF=60.57;break;case c.AGI<=24240:iIPF=66.23;break;case c.AGI<=28537:iIPF=71.89;break;case c.AGI<=33954:iIPF=80.33;break;case c.AGI<=42648:iIPF=88.77;break;case c.AGI<=53488:iIPF=100;break;case c.AGI<=64331:iIPF=100;break;case c.AGI<=77318:iIPF=111.8;break;case c.AGI<=99003:iIPF=123.5;break;case c.AGI<=140221:iIPF=141.2;break;case c.AGI<=160776:iIPF=150;break;default:iIPF=200;break}}iMonthlyPaymentA=iPrincipalConstantMultiplier*iIPF/100/12;iPoverty=a(c.familySize?c.familySize:1,c.state?c.state:"PA");iMonthlyPaymentB=(c.AGI-iPoverty)*0.2/12;iMonthlyPayment=Math.min(iMonthlyPaymentA,iMonthlyPaymentB);if(iMonthlyPayment<0){iMonthlyPayment=0}return iMonthlyPayment},incomeSensitiveRepayment:function(c){iMonthlyPayment=0;iMonthlyInterest=0;for(var b=0;b<c.principal.length;b++){iMonthlyPayment+=c.AGI*0.04/12;iMonthlyInterest+=c.principal[b]*c.interestRate[b]/100/12}return Math.max(iMonthlyPayment,iMonthlyInterest)}}}());